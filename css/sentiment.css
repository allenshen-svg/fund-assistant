/* =============================================
   KOL vs 散户 情绪博弈分析 - Styles
   ============================================= */

*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#f0f2f5;--card:#fff;--text:#1a1a2e;--sub:#8896a4;
  --primary:#6366f1;--primary-bg:#eef2ff;
  --up:#e74040;--up-bg:#fef2f2;
  --down:#22a065;--down-bg:#ecfdf5;
  --border:#e8ecf1;--radius:14px;
  --warn:#f59e0b;--warn-bg:#fef3c7;
  --hot:#ef4444;--cold:#3b82f6;
  --shadow:0 1px 4px rgba(0,0,0,.04);
}
body{font-family:-apple-system,BlinkMacSystemFont,"SF Pro","PingFang SC","Helvetica Neue",sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;max-width:560px;margin:0 auto;min-height:100vh;padding-bottom:100px}

/* Page Header */
.page-header{background:linear-gradient(135deg,#1e1b4b,#312e81,#4338ca);color:#fff;padding:16px;position:sticky;top:0;z-index:100}
.ph-back{font-size:12px;opacity:.7;cursor:pointer;display:inline-flex;align-items:center;gap:4px;margin-bottom:8px;text-decoration:none;color:inherit}
.ph-back:hover{opacity:1}
.ph-title{font-size:18px;font-weight:800;display:flex;align-items:center;gap:8px}
.ph-title .badge{font-size:10px;background:rgba(255,255,255,.2);padding:2px 10px;border-radius:10px}
.ph-sub{font-size:11px;opacity:.65;margin-top:4px;line-height:1.5}
.ph-status{display:flex;align-items:center;gap:6px;margin-top:6px;font-size:11px}
.ph-dot{width:7px;height:7px;border-radius:50%;display:inline-block}
.ph-dot.live{background:#22c55e;box-shadow:0 0 8px rgba(34,197,94,.6);animation:pulse 2s infinite}
.ph-dot.off{background:#64748b}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}

/* Loading */
.loading-overlay{position:fixed;inset:0;background:linear-gradient(135deg,#1e1b4b,#312e81);z-index:999;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;transition:opacity .5s}
.loading-overlay.hide{opacity:0;pointer-events:none}
.loading-icon{font-size:56px;margin-bottom:16px;animation:bounce 1.4s infinite}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.loading-title{font-size:18px;font-weight:700;margin-bottom:8px}
.loading-sub{font-size:12px;opacity:.6;margin-bottom:20px;text-align:center;max-width:300px;line-height:1.6}
.loading-bar{width:240px;height:5px;background:rgba(255,255,255,.15);border-radius:3px;overflow:hidden}
.loading-fill{height:100%;background:linear-gradient(90deg,#818cf8,#c084fc);border-radius:3px;transition:width .3s}
.loading-status{font-size:11px;opacity:.5;margin-top:10px}
.loading-sources{display:flex;flex-wrap:wrap;gap:6px;margin-top:16px;max-width:280px;justify-content:center}
.loading-src{font-size:10px;padding:3px 8px;border-radius:6px;background:rgba(255,255,255,.1);color:rgba(255,255,255,.7)}
.loading-src.done{background:rgba(34,197,94,.2);color:#86efac}
.loading-src.active{background:rgba(251,191,36,.2);color:#fde68a;animation:srcPulse 1s infinite}
@keyframes srcPulse{0%,100%{opacity:1}50%{opacity:.5}}

/* Nav */
.nav-bar{display:flex;gap:6px;padding:10px 12px;overflow-x:auto;background:var(--card);border-bottom:1px solid var(--border);position:sticky;top:76px;z-index:50;-webkit-overflow-scrolling:touch}
.nav-bar::-webkit-scrollbar{display:none}
.nav-item{flex-shrink:0;padding:6px 12px;border-radius:8px;font-size:11px;font-weight:500;cursor:pointer;background:var(--bg);color:var(--sub);text-decoration:none;transition:.2s}
.nav-item:active,.nav-item.active{background:var(--primary-bg);color:var(--primary)}

/* Section */
.section{margin:12px;background:var(--card);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow)}
.sec-header{padding:14px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:8px}
.sec-icon{font-size:20px}
.sec-title{font-size:14px;font-weight:700;flex:1}
.sec-badge{font-size:10px;background:var(--primary-bg);color:var(--primary);padding:2px 8px;border-radius:8px;font-weight:600}
.sec-body{padding:14px 16px}

/* Source Stats */
.src-stats{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:6px;margin-bottom:14px}
.src-stat{background:var(--bg);border-radius:10px;padding:8px;text-align:center}
.src-stat-icon{font-size:18px}
.src-stat-name{font-size:9px;color:var(--sub);margin-top:2px;font-weight:600}
.src-stat-val{font-size:14px;font-weight:800;margin-top:2px}

/* Gauge */
.gauge-row{display:flex;gap:12px;margin-bottom:16px}
.gauge-card{flex:1;text-align:center;background:var(--bg);border-radius:12px;padding:14px 10px}
.gauge-svg{width:100px;height:60px;margin:0 auto 6px}
.gauge-label{font-size:10px;font-weight:600;color:var(--sub);margin-bottom:4px}
.gauge-val{font-size:22px;font-weight:800}
.gauge-desc{font-size:9px;color:var(--sub);margin-top:2px}

/* Temperature Badge */
.temp-badge{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:8px;font-size:12px;font-weight:700}
.temp-badge.overheated{background:#fef2f2;color:#dc2626}
.temp-badge.hot{background:#fef3c7;color:#d97706}
.temp-badge.warm{background:#fef9c3;color:#a16207}
.temp-badge.neutral{background:#f1f5f9;color:#64748b}
.temp-badge.cold{background:#eff6ff;color:#2563eb}

/* Hotspot Cards */
.hotspot-card{background:var(--bg);border-radius:12px;padding:14px;margin-bottom:10px;border-left:4px solid var(--primary)}
.hotspot-card.fomo{border-left-color:#ef4444}
.hotspot-card.panic{border-left-color:#22c55e}
.hotspot-card.neutral{border-left-color:#94a3b8}
.hs-title{font-size:13px;font-weight:700;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.hs-row{display:flex;align-items:flex-start;gap:6px;margin-bottom:6px;font-size:11px;line-height:1.6}
.hs-icon{flex-shrink:0;width:20px;text-align:center}
.hs-label{font-weight:600;color:var(--sub);min-width:70px;flex-shrink:0}
.hs-text{color:#374151;flex:1}

/* Action Cards */
.action-card{border-radius:12px;padding:14px;margin-bottom:10px}
.action-card.bullish{background:linear-gradient(135deg,#fef2f2,#fff);border:1px solid #fecaca}
.action-card.bearish{background:linear-gradient(135deg,#ecfdf5,#fff);border:1px solid #bbf7d0}
.action-card.tactical{background:linear-gradient(135deg,#eff6ff,#fff);border:1px solid #bfdbfe}
.ac-title{font-size:12px;font-weight:700;margin-bottom:6px;display:flex;align-items:center;gap:6px}
.ac-body{font-size:11px;color:#374151;line-height:1.7}

/* Crowded Trades / Hot Assets */
.crowd-pills{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.crowd-pill{font-size:10px;padding:4px 10px;border-radius:16px;font-weight:600;display:flex;align-items:center;gap:4px}
.crowd-pill.hot{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}
.crowd-pill.cold{background:#eff6ff;color:#2563eb;border:1px solid #bfdbfe}

/* Video Data Table */
.video-table{width:100%;border-collapse:collapse;font-size:11px}
.video-table th{background:var(--bg);padding:8px 6px;font-weight:600;color:var(--sub);text-align:left;font-size:9px;text-transform:uppercase;letter-spacing:.5px}
.video-table td{padding:8px 6px;border-top:1px solid var(--border);vertical-align:top}
.video-table tr:hover{background:var(--bg)}
.vt-title{font-weight:600;color:var(--text);max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.vt-likes{font-variant-numeric:tabular-nums;color:var(--hot);font-weight:600}
.vt-sentiment{font-size:9px;padding:2px 6px;border-radius:4px;font-weight:600;white-space:nowrap}
.vt-sentiment.pos{background:var(--up-bg);color:var(--up)}
.vt-sentiment.neg{background:var(--down-bg);color:var(--down)}
.vt-sentiment.neu{background:#f1f5f9;color:var(--sub)}
.vt-noise{text-decoration:line-through;opacity:.5}
.vt-noise-tag{font-size:8px;background:#fef2f2;color:#dc2626;padding:1px 4px;border-radius:3px;margin-left:4px}

/* JSON Factor Cards */
.factor-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.factor-card{background:var(--bg);border-radius:10px;padding:12px;text-align:center}
.factor-card .fc-label{font-size:10px;font-weight:600;color:var(--sub);margin-bottom:4px}
.factor-card .fc-value{font-size:20px;font-weight:800}
.factor-card .fc-bar{height:4px;border-radius:2px;background:#e2e8f0;margin-top:6px;overflow:hidden}
.factor-card .fc-bar-fill{height:100%;border-radius:2px;transition:width .6s ease}
.factor-assets{display:flex;flex-wrap:wrap;gap:6px;margin-top:10px}
.factor-signal{margin-top:10px;text-align:center;padding:10px;border-radius:10px;font-weight:700;font-size:13px}
.factor-raw-toggle{font-size:10px;color:var(--primary);cursor:pointer;text-align:center;margin-top:10px;padding:6px;border-radius:8px;background:var(--primary-bg)}
.factor-raw-toggle:hover{opacity:.8}
.factor-raw-block{display:none;margin-top:10px}
.factor-raw-block.show{display:block}

/* Buttons */
.btn-row{display:flex;gap:8px;margin:12px}
.btn{flex:1;padding:12px;border:none;border-radius:12px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;letter-spacing:.3px;display:flex;align-items:center;justify-content:center;gap:8px}
.btn:active{transform:scale(.97)}
.btn.primary{background:linear-gradient(135deg,#4338ca,#6366f1);color:white;box-shadow:0 2px 8px rgba(99,102,241,.3)}
.btn.primary:hover{box-shadow:0 6px 20px rgba(99,102,241,.35)}
.btn.primary:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}
.btn.secondary{background:var(--bg);color:var(--text);border:1px solid var(--border)}
.btn .spinner-sm{width:16px;height:16px;border:2px solid rgba(255,255,255,.2);border-top-color:white;border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

.progress-text{font-size:11px;color:var(--sub);text-align:center;padding:6px 12px;min-height:20px}

/* Markdown Render */
.md-render{font-size:12px;color:#1e293b;line-height:1.8}
.md-render h3{font-size:14px;font-weight:700;margin:16px 0 10px;padding-bottom:6px;border-bottom:1px solid var(--border)}
.md-render h3:first-child{margin-top:0}
.md-render ul{padding-left:16px;margin:6px 0}
.md-render li{margin-bottom:4px}
.md-render strong{color:#1e1b4b}
.md-render code{background:var(--bg);padding:1px 5px;border-radius:4px;font-size:11px;font-family:'SF Mono','Menlo',monospace}
.md-render pre{background:#1e293b;color:#e2e8f0;padding:12px;border-radius:10px;overflow-x:auto;margin:10px 0}
.md-render pre code{background:none;padding:0;color:inherit}

/* Settings Modal */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(15,23,42,.5);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:400;align-items:center;justify-content:center}
.modal-overlay.show{display:flex}
.modal{background:var(--card);border-radius:20px;margin:16px;padding:24px;max-width:380px;width:100%;max-height:85vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.15)}
.modal h3{font-size:17px;margin-bottom:16px;display:flex;justify-content:space-between;align-items:center}
.modal h3 button{background:none;border:none;font-size:18px;cursor:pointer;color:var(--sub);width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .2s}
.modal h3 button:hover{background:var(--bg)}
.form-row{margin-bottom:14px}
.form-row label{display:block;font-size:11px;font-weight:600;color:var(--sub);margin-bottom:5px;letter-spacing:.3px}
.form-row input,.form-row select{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;font-size:13px;transition:border-color .2s;outline:none;background:var(--bg)}
.form-row input:focus,.form-row select:focus{border-color:var(--primary);background:#fff}
.form-btn{width:100%;padding:12px;border:none;border-radius:12px;background:linear-gradient(135deg,#4338ca,#6366f1);color:white;font-size:14px;font-weight:600;cursor:pointer;transition:background .2s}

/* Footer */
.page-footer{text-align:center;padding:20px 16px 40px;font-size:10px;color:var(--sub);line-height:1.6}
.page-footer a{color:var(--primary);text-decoration:none}

/* Heatmap bar */
.heatbar{display:flex;flex-direction:column;gap:5px}
.heatbar-row{display:flex;align-items:center;gap:8px}
.heatbar-label{width:68px;font-size:10px;font-weight:600;text-align:right;flex-shrink:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.heatbar-track{flex:1;height:18px;background:var(--bg);border-radius:4px;overflow:hidden;position:relative}
.heatbar-fill{height:100%;border-radius:4px;display:flex;align-items:center;padding-left:6px;transition:width .6s ease}
.heatbar-fill span{font-size:9px;color:#fff;font-weight:600;white-space:nowrap}
.heatbar-val{width:32px;font-size:10px;font-weight:600;text-align:right;flex-shrink:0}

/* Animate in */
.fade-in{animation:fadeIn .5s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* Manual input toggle */
.manual-area{display:none;margin:0 12px 12px}
.manual-area.show{display:block}
.manual-area textarea{width:100%;min-height:120px;padding:10px;border:1.5px solid var(--border);border-radius:10px;font-size:11px;font-family:'SF Mono','Menlo',monospace;resize:vertical;outline:none;background:var(--card)}
.manual-area textarea:focus{border-color:var(--primary)}

/* JSON raw block (hidden by default) */
.json-block{background:#1e293b;color:#e2e8f0;border-radius:10px;padding:14px;font-size:11px;font-family:'SF Mono','Menlo','Consolas',monospace;overflow-x:auto;line-height:1.6;white-space:pre-wrap;word-break:break-word}
.json-key{color:#fbbf24}
.json-str{color:#34d399}
.json-num{color:#818cf8}
