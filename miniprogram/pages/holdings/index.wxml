<view class="container">

  <!-- ====== å½“å‰æŒä»“ ====== -->
  <view class="card">
    <view class="card-header">
      <text class="title">ğŸ’¼ å½“å‰æŒä»“</text>
      <text class="sub">å…± {{list.length}} åª</text>
    </view>

    <view wx:if="{{list.length === 0 && !loading}}" class="empty-state">
      <text class="empty-icon">ğŸ“¦</text>
      <text class="sub">æš‚æ— æŒä»“ï¼Œè¯·æ·»åŠ åŸºé‡‘</text>
    </view>

    <view class="h-item" wx:for="{{list}}" wx:key="code">
      <view class="h-main">
        <view class="h-left">
          <text class="h-name">{{item.name}}</text>
          <text class="sub">{{item.code}} Â· {{item.type}}</text>
        </view>
        <view class="h-right">
          <text class="h-pct pct-{{item.pctClass}}">{{item.pctStr}}</text>
          <text class="sub" wx:if="{{item.estimate}}">ä¼°å€¼ {{item.estimate}}</text>
        </view>
      </view>
      <view class="h-actions">
        <text class="del-btn" data-code="{{item.code}}" data-name="{{item.name}}" bindtap="removeHolding">åˆ é™¤</text>
      </view>
    </view>
  </view>

  <!-- ====== æ“ä½œæŒ‰é’® ====== -->
  <view class="action-btns">
    <button class="btn" bindtap="toggleAdd">âœï¸ æ‰‹åŠ¨æ·»åŠ </button>
    <button class="btn ghost" bindtap="toggleQuick">âš¡ å¿«é€Ÿé€‰æ‹©</button>
    <button class="btn ghost" style="margin-top:12rpx;" bindtap="resetToDefault">ğŸ”„ æ¢å¤é»˜è®¤</button>
  </view>

  <!-- ====== æ‰‹åŠ¨æ·»åŠ é¢æ¿ ====== -->
  <view class="card add-panel" wx:if="{{showAdd}}">
    <view class="card-header">
      <text class="title">âœï¸ æ‰‹åŠ¨æ·»åŠ </text>
    </view>
    <view class="form-item">
      <text class="label">åŸºé‡‘ä»£ç </text>
      <input class="input" placeholder="ä¾‹å¦‚ 000216" value="{{code}}" bindinput="onCodeInput" />
    </view>
    <view class="form-item">
      <text class="label">åŸºé‡‘åç§°</text>
      <input class="input" placeholder="ä¾‹å¦‚ åå®‰é»„é‡‘ETFè”æ¥A" value="{{name}}" bindinput="onNameInput" />
    </view>
    <view class="form-item">
      <text class="label">åŸºé‡‘ç±»å‹</text>
      <picker mode="selector" range="{{typeOptions}}" value="{{typeIndex}}" bindchange="onTypeChange">
        <view class="input picker-val">{{typeOptions[typeIndex]}} â–¾</view>
      </picker>
    </view>
    <button class="btn" style="margin-top:16rpx;" bindtap="addHolding">ç¡®è®¤æ·»åŠ </button>
  </view>

  <!-- ====== å¿«é€Ÿé€‰æ‹©é¢æ¿ ====== -->
  <view class="card" wx:if="{{showQuick}}">
    <view class="card-header">
      <text class="title">âš¡ ä»å†…ç½®åº“é€‰æ‹©</text>
      <text class="sub">ç‚¹å‡»å³å¯æ·»åŠ </text>
    </view>
    <view wx:if="{{quickList.length === 0}}" class="sub" style="text-align:center;padding:20rpx;">
      å†…ç½®åŸºé‡‘å·²å…¨éƒ¨æ·»åŠ 
    </view>
    <view class="quick-item" wx:for="{{quickList}}" wx:key="code"
          data-item="{{item}}" bindtap="quickAdd">
      <view>
        <text class="h-name">{{item.name}}</text>
        <text class="sub" style="margin-left:8rpx;">{{item.code}}</text>
      </view>
      <text class="chip blue">{{item.type}}</text>
    </view>
  </view>

</view>
